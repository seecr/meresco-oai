CHANGELOG Meresco-Oai
=====================

version: 3.4 -> 3.4.1
date:    2011-02-11

IOError in socket.connect now handled
-------------------------------------
Socket.connect can raise an IOError with message "No route to host". This
removes the oaiharvester from the reactor. This is now logged and retried 
like a SocketError
(2011-01-06, 3.4-Edurep)

==============================================================================

version: 3.3 -> 3.4
date:    2010-12-06

Using faster PersistentSortedIntegerList instead of SortedFileList in OaiJazz
-----------------------------------------------------------------------------
PersistentSortedIntegerList is faster than SortedFileList, especially for
deletes (which could halt the system for seconds). Because the format of
persisted lists differ from the previous version, a version check + conversion
script was added as well.
(2010-12-03, 3.3-Edurep)

OaiHarvester fix w.r.t. splitting HTTP header and body
------------------------------------------------------
Bug fixed that caused OaiHarvester to choke on responses that contain \r\n\r\n
in body.
(2010-11-17, 3.3-Edurep)

OaiHarvester resumptionToken handling improvement
-------------------------------------------------
The OaiHarvester read the resumptionToken too literally from file, which
inhibited manual editing - newlines are now stripped. Url-encoding is used when
using the resumptionToken to allow for unusual characters in an Oai-request.
(2010-11-15, 3.3-Edurep)

Fix OaiList concurrency bug
---------------------------
OaiList concurrent ListRecords and ListIdentifiers calls no longer interfere.
(2010-11-12, 3.3-Edurep)

OaiHarvester defaults to logging to stderr.
-------------------------------------------
The OaiHarvester will always log to stderr. To make it log to stdout use the
parameter verbose in the constructor.
(2010-11-03, 3.3-Edurep)

OaiHarvester scheduling support added
-------------------------------------
The OaiHarvester previously processed all records from a ListRecords response in
a single do.add(...) call.  Since do-calls are intentionally uninterruptible,
this blocked the service containing the OaiHarvester too long. The ListRecords
response is now handled on a per-record basis, scheduled by the Reactor
(optionally with a specified priority); including a matching
UpdateAdapterFromOaiHarvester.
(2010-10-29, 3.3-Edurep)

Delete message will also resume suspended objects.
--------------------------------------------------
OaiSuspend will now also resume suspended objects when a delete message is
received.
(2010-10-19, 3.3-Edurep)

Use do instead of any when sending message to observers.
--------------------------------------------------------
Message to observers of OaiHarvester are now called using do so that more
observers can listen to the sent message.
(2010-10-19, 3.3-Edurep)

Use kwargs in OaiHarvester
--------------------------
OaiHarvester will now use keywordarguments to send calls to its observers.
(2010-10-19, 3.3-Edurep)

Oai Harvester state directory is created when absent
----------------------------------------------------
When the configured state directory (workingDir) does not exist yet it is now
created for you (including parent directories). The Oai Harvester now has the
same behaviour as similar meresco components which keep state in a configured
directory.
(2010-10-18, 3.3-Edurep)

OaiIdentify extended with branding
----------------------------------
OaiIdentify can now be extended with an optional branding component. This
components gives an collectionIcon with an url, link and title in the
description of oai Identify. This component can be placed under OaiPmh in the
server DNA.
(2010-10-12, 3.3-MWE)

==============================================================================

version: 3.2.1 -> 3.3
date:    2010-10-11

Save the OAI Harvester state.
-----------------------------
The OAI Harvester state (only the ResumptionToken) is saved in the workingdir of
the harvester. When restarting the resumptionToken will be read and the
harveseter will continue from the last state.
(2010-10-07, 3.2.1-Edurep)

Near realtime OAI + OaiHarvester component
------------------------------------------
OaiPmh (specifically OaiList) now supports the custom 'x-wait' parameter on
ListRecords verb that enables long polling for OAI updates over HTTP between
harvester and provider. The new OaiHarvester component enables non-blocking
harvesting from within a Meresco DNA server. It calls 'add' on an obeserver for
each ListRecords response and supports the 'x-wait' custom parameter.
(2010-10-06, 3.2.1-Edurep)

Oai ListRecords using yields
----------------------------
Oai ListRecords now uses yield statements instead of WebRequestServer-writes.
(2010-10-04, 3.2.1-Edurep)

==============================================================================

version: 3.2 -> 3.2.1
date:    2010-09-21

bugfix about in ListIdentifiers
-------------------------------
The output of the ListIdentifiers wrongfully contained Provenance statements. 
These have been removed in order to make the output compliant with the OAI-PMH
specification.

bugfix oai identifier in Identify
---------------------------------
The Oai Identifier in the Identify verb is matched against a regular expression
to make sure the identifier is valid according to OAI PMH specifications.

==============================================================================

version: 3.1.1 -> 3.2
date:    2010-09-20

!! Meresco-Oai 3.2 is not backwards compatible with Meresco-Oai 3.1.1

Consistant usage of args and kwargs in add calls
------------------------------------------------
The usage of args and kwargs with add calls has been normalized throughout
Meresco. Therefore the meresco-oai code has been made compliant with this new
practice.
